<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Introduction to Multiple Linear Regression</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dr. Olanrewaju Akande" />
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <script src="libs/kePrint/kePrint.js"></script>
    <link rel="stylesheet" href="slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to Multiple Linear Regression
### Dr. Olanrewaju Akande
### Aug 29, 2019

---





- 


## Outline

- Motivating Example

- Multiple linear regression

- Interpretation of coefficients

- Hypothesis tests for coefficients

- Confidence interval for coefficients

- Predictions

- Case study


---
## Introduction

- In the stats module of the MIDS summer online review, you were introduced to simple linear regression.

- Today, we will begin our series of lectures on multiple linear regression. 

- For now, we will restrict our attention to model interpretation, testing, and predictions under multiple linear regression. 

- In the next class, we will start to explore model specification, assessment and validation. 


---

class: center, middle

# Motivating Example


---

## Sex discrimination
- In 1970’s, Harris Trust and Savings Bank was sued for discrimination on the basis of sex.  

- Analysis of salaries of employees of one type (skilled, entry level clerical) presented as evidence
by the defense.

- The data is in the file *wagediscrim.txt* on Sakai.

- Did female employees tend to receive lower starting salaries than similarly qualified and experienced male employees?


---
## The Data

93 employees on data file (61 female, 32 male).

Variable    | Description
:------------- | :------------ 
bsal | Annual salary at time of hire
sal77 | Annual salary in 1977.
educ | years of education.
exper | months previous work prior to hire at bank.
fsex | 1 if female, 0 if male
senior | months worked at bank since hired
age | months


---
## The Data

Let's get a sense of the data: how many rows, how many columns?

```r
wages = read.csv("data/wagediscrim.txt", header= T)
dim(wages)
```

```
## [1] 93  8
```

Let's take a look at the first few rows of the data

```r
head(wages)
```

```
##   bsal sal77  sex senior age educ exper fsex
## 1 5040 12420 Male     96 329   15  14.0    0
## 2 6300 12060 Male     82 357   15  72.0    0
## 3 6000 15120 Male     67 315   15  35.5    0
## 4 6000 16320 Male     97 354   12  24.0    0
## 5 6000 12300 Male     66 351   12  56.0    0
## 6 6840 10380 Male     92 374   15  41.5    0
```


---
## Exploratory Data Analysis (EDA)

How about quick summaries of each variable to know the range of data we are working with

```r
wages$fsex &lt;- factor(wages$fsex)
summary(wages)
```

```
##       bsal          sal77           sex         senior     
##  Min.   :3900   Min.   : 7860   Female:61   Min.   :65.00  
##  1st Qu.:4980   1st Qu.: 9000   Male  :32   1st Qu.:74.00  
##  Median :5400   Median :10020               Median :84.00  
##  Mean   :5420   Mean   :10393               Mean   :82.28  
##  3rd Qu.:6000   3rd Qu.:11220               3rd Qu.:90.00  
##  Max.   :8100   Max.   :16320               Max.   :98.00  
##       age             educ           exper       fsex  
##  Min.   :280.0   Min.   : 8.00   Min.   :  0.0   0:32  
##  1st Qu.:349.0   1st Qu.:12.00   1st Qu.: 35.5   1:61  
##  Median :468.0   Median :12.00   Median : 70.0         
##  Mean   :474.4   Mean   :12.51   Mean   :100.9         
##  3rd Qu.:590.0   3rd Qu.:15.00   3rd Qu.:144.0         
##  Max.   :774.0   Max.   :16.00   Max.   :381.0
```


---
## EDA

Since we only care about comparing starting salaries for male and female employees, let's look at a boxplot of `bsal` by `sex`.

```r
boxplot(bsal~sex,data=wages,ylab="Sex",horizontal=TRUE,
        xlab="Base Salary")
```

&lt;img src="figure/beamer-unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;
&lt;div class="question"&gt;
What do you think? What can you infer from this plot?
&lt;/div&gt;


---
## T.test?

We could go further and try a t-test for the hypotheses:
.small[
`$$H_0: \mu_{male} - \mu_{female} \leq 0 \ \ \textrm{vs.} \ \ H_A: \mu_{male} - \mu_{female} &gt; 0$$`
]

```r
t.test(bsal~fsex,data=wages,alternative="greater")
```

```
## 
## 	Welch Two Sample t-test
## 
## data:  bsal by fsex
## t = 5.83, df = 51.329, p-value = 1.855e-07
## alternative hypothesis: true difference in means is greater than 0
## 95 percent confidence interval:
##  582.9857      Inf
## sample estimates:
## mean in group 0 mean in group 1 
##        5956.875        5138.852
```

&lt;div class="question"&gt;
Is a t.test sufficient here? Any concerns?
&lt;/div&gt;


---
## EDA

- T-test shows men started at higher salaries than women (t=5.83, p `\(&lt;\)` .0001).

- But, it **doesn't** control for other characteristics.

- There are other variables that are correlated with `bsal`. Here's the correlation matrix of all numerical variables using the *corr* function in R.
&lt;table class="table" style="font-size: 20px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; bsal &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sal77 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; senior &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; educ &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; exper &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; bsal &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.42 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.41 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.17 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; sal77 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.42 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.42 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.37 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; senior &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.07 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.23 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.80 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; educ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.41 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.42 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.23 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; exper &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.07 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.00 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---
## EDA

In fact, let's take a look at scatter plots of all variables

```r
pairs(wages)
```

&lt;img src="figure/beamer-unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;


---
## EDA

Too busy! Let's take a closer look at some variables.

First, `bsal` vs. `senior`

```r
plot(wages$bsal~wages$senior,xlab="Seniority",ylab="Base Salary")
abline(lm(bsal~senior,data=wages))
```

&lt;img src="figure/beamer-unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;


---
## EDA

Next, `bsal` vs. `senior`

```r
plot(wages$bsal~wages$age,xlab="Age",ylab="Base Salary")
abline(lm(bsal~age,data=wages))
```

&lt;img src="figure/beamer-unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;


---
## EDA

`bsal` vs. `educ`

```r
plot(wages$bsal~wages$educ,xlab="Education",ylab="Base Salary")
abline(lm(bsal~educ,data=wages))
```

&lt;img src="figure/beamer-unnamed-chunk-10-1.png" style="display: block; margin: auto;" /&gt;


---
## EDA

- Finally, `bsal` vs. `exper`

```r
plot(wages$bsal~wages$exper,xlab="Experience",ylab="Base Salary")
abline(lm(bsal~exper,data=wages))
```

&lt;img src="figure/beamer-unnamed-chunk-11-1.png" style="display: block; margin: auto;" /&gt;
- Clearly, they are other variables that may be relevant in explaining baseline salary.

---

class: center, middle

# Multiple Linear Regression
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
